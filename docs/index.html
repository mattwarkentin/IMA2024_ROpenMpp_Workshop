<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="author" content="Matt Warkentin, PhD (matthew.warkentin@ucalgary.ca) Michael Wolfson, PhD (mwolfson@uottawa.ca)">
<meta name="dcterms.date" content="2024-01-08">
<title>Hands-on with R and OpenM++ for Microsimulation</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
<link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="https://images.unsplash.com/photo-1582778959124-88d5fd4fafa9?q=80&amp;w=1740&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="quarto-title-block center"><h1 class="title">Hands-on with R and OpenM++ for Microsimulation</h1>
  <p class="subtitle">9th World Congress of the International Microsimulation Association</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Matt Warkentin, PhD (<a href="mailto:matthew.warkentin@ucalgary.ca" class="email">matthew.warkentin@ucalgary.ca</a>)<br>Michael Wolfson, PhD (<a href="mailto:mwolfson@uottawa.ca" class="email">mwolfson@uottawa.ca</a>) 
</div>
</div>
</div>

  <p class="date">2024-01-08</p>
</section><section id="who-are-we" class="slide level2 smaller"><h2>Who are we?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p><strong>Name:</strong> Matt Warkentin</p></li>
<li><p><strong>Living:</strong> Calgary, Alberta, Canada</p></li>
<li>
<p><strong>Education:</strong></p>
<ul>
<li>BSc, Medical Sciences, Brock University</li>
<li>MSc, Epidemiology, Brock University</li>
<li>PhD, Molecular Epidemiology, University of Toronto</li>
<li>Postdoc, Dept. of Oncology, University of Calgary</li>
</ul>
</li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><p><strong>Name:</strong> Michael Wolfson</p></li>
<li><p><strong>Living:</strong> Ottawa, Ontario, Canada</p></li>
<li>
<p><strong>Education:</strong></p>
<ul>
<li>BSc, Mathematics, Computer Science, Economics, University of Toronto</li>
<li>PhD, Economics, Cambridge University</li>
<li>Professor (nominally retired), University of Ottawa</li>
</ul>
</li>
</ul>
</div>
</div>
</section><section id="relevant-disclosures" class="slide level2"><h2>Relevant Disclosures</h2>
<ul>
<li><p><strong>Matt Warkentin</strong>: None to declare</p></li>
<li><p><strong>Michael Wolfson</strong>: Managed development of ModGen at Statistics Canada; Funded much of the development of OpenM++ from various research grants at University of Ottawa</p></li>
</ul></section><section id="housekeeping" class="slide level2"><h2>
<svg aria-hidden="true" role="img" viewbox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6v29.1L364.3 320h29.1c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"></path></svg> Housekeeping</h2>
<ul>
<li>
<p>Those wishing to be <strong>active</strong> workshop participants will require a <strong>user name</strong> and <strong>password</strong> to connect to the cloud instance of OpenM++</p>
<ul>
<li>Please come see us if you don’t yet have this information</li>
</ul>
</li>
<li><p>Passive participants, please feel free follow along, ask questions, and interact with the workshop team</p></li>
<li><p>Ask questions!</p></li>
<li><p>Ask questions!</p></li>
<li><p>Ask questions!</p></li>
</ul></section><section id="agenda" class="slide level2"><h2>
<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"></path></svg> Agenda</h2>
<ol type="1">
<li><p>Brief history of OpenM++</p></li>
<li><p>Introduction to the OpenM++ API</p></li>
<li>
<p>Wrapping an API in R</p>
<ul>
<li>Including some <em>tricks-of-the-trade</em>
</li>
</ul>
</li>
<li>
<p>Wrapping the OpenM++ API</p>
<ul>
<li>Introduction to <a href="https://github.com/oncology-outcomes/oncosimx">oncosimx</a>
</li>
</ul>
</li>
<li><p>Hands-on examples</p></li>
<li><p>Concluding remarks</p></li>
</ol></section><section id="what-we-hope-to-achieve" class="slide level2"><h2>What we hope to achieve?</h2>
<ol type="1">
<li><p>Provide contextual background information on the history, design considerations, and features of OpenM++</p></li>
<li><p>Provide insights into how the OpenM++ API works and how it can work for YOU</p></li>
<li><p>Provide some <em>“tricks-of-the-trade”</em> for how to effectively wrap stateful APIs into seamless R packages</p></li>
<li><p>Provide <em>“hands on”</em> examples of how this looks and feels when it all comes together</p></li>
</ol></section><section><section id="brief-history-of-openm" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>Brief history of OpenM++</h1>

</section><section id="brief-history-of-modgen-1" class="slide level2"><h2>Brief history of ModGen (1)</h2>
<ul>
<li><p>Genesis mid 1980s – Canada had just finished a period of the <em>“Great Pension Debate”</em>, but analytical tools for pension policy scenarios were sorely lacking</p></li>
<li>
<p>Context:</p>
<ul>
<li>Demographers in Canada were debating, using various multi-state life tables, how many marriages would end in divorce</li>
<li>Stat Can was launching a trio of new longitudinal surveys and had just completed its first family history survey</li>
<li>Stat Can had just released SPSD/M = Social Policy Simulation Database and Model, a cross-sectional tax/transfer microsimulation model</li>
</ul>
</li>
</ul></section><section id="brief-history-of-modgen-2" class="slide level2"><h2>Brief history of ModGen (2)</h2>
<ul>
<li><p><strong>Result:</strong> Stat Can started developing dynamic microsimulation models, using annual time steps, as was conventional (building on Orcutt’s CORSIM)</p></li>
<li><p><strong>Problems:</strong> Too many events interacted (e.g., nuptiality &amp; fertility &amp; labour force &amp; education transitions), so annual time step proved too limiting, and unable to handle sub-annual events such as cancers and heart attacks</p></li>
</ul></section><section id="brief-history-of-modgen-3" class="slide level2 smaller"><h2>Brief history of ModGen (3)</h2>
<ul>
<li><p>Fortunately, we had an extraordinary team of subject matter/statistical/data/computer science capable analysts</p></li>
<li>
<p><strong>Decision</strong>: Create our own software environment designed to support writing complex dynamic microsimulation models</p>
<ul>
<li>By investing in an appropriately designed microsimulation modeling environment, we would save time and effort in the longer term</li>
<li>Software was designed for continuous time modeling, with discrete events and an event queue (discrete time models feasible as special cases)</li>
<li>Models could be either case-based or with interacting agents</li>
<li>Using the latest compiler-compiler software technology</li>
</ul>
</li>
<li><p>ModGen (“model generator”) was born</p></li>
</ul></section><section id="transition-to-openm" class="slide level2"><h2>Transition to OpenM++</h2>
<ul>
<li><p>By 2010, it was clear than a successor to ModGen was needed…</p></li>
<li><p>Growing interest outside Stat Can in its microsimulation software technology, but ModGen with its <strong>closed-source</strong> was constraining</p></li>
<li><p>Many developments in computing had also occurred, including: Cloud services, massive parallelism, different operating systems (not just Windows)</p></li>
<li><p>Steve Gribble was the master/guru architect of ModGen and is involved centrally in creating OpenM++</p></li>
</ul></section><section id="transition-to-openm-1" class="slide level2 smaller"><h2>Transition to OpenM++</h2>
<ul>
<li>Several research grants to Michael Wolfson enabled development of OpenM++ to begin
<ul>
<li>
<strong>HealthPaths</strong>: Building on the longitudinal National Population Health Survey, focus on health-adjusted life expectancy, determinants of health, and health inequalities</li>
<li>
<strong>THIM (“theoretical health inequality model”)</strong>: Small multi-level model to explore Canada-US differences in the relationship between income inequality and health</li>
<li>
<strong>GMM (genetic mixing model)</strong>: Genome Canada-funded pre-model for OncoSim0Breast to evaluate scenarios for transitioning from age-based to risk based breast cancer screening</li>
</ul>
</li>
<li>Recently growing external uses of OpenM++</li>
</ul></section><section id="role-of-statistics-canada" class="slide level2"><h2>Role of Statistics Canada</h2>
<ul>
<li><p>Stat Can is currently supporting several major microsimulation models, previously written in ModGen, and all are currently written (i.e., simply recompiled) in OpenM++</p></li>
<li><p>Committed to continuing development and support of OpenM++ to sustain these models</p></li>
<li><p>Open to engaging with others using and or wanting to use OpenM++ as well as our open microsim models</p></li>
<li><p>Interested in engaging with others to build a broader community of users of OpenM++</p></li>
</ul></section><section id="statcan-models-in-modgen" class="slide level2"><h2>StatCan Models in ModGen</h2>
<ul>
<li><p><strong>LifePaths</strong>: For pension and retirement income policy</p></li>
<li><p><strong>POHEM</strong> (<em>“POpulation HEalth Model”</em>): Initially for cancer and heart disease, then arthritis and dementia</p></li>
<li><p><strong>XEcon</strong> (<em>“eXperimental Economy”</em>): Small theoretical model to explore the “new goods” problem in price indices</p></li>
<li><p><strong>OncoSim</strong>: With the Canadian Partnership Against Cancer</p></li>
<li><p><strong>DEMOSIM</strong>: Demographic projection model using full population census, including specialized foci on Aboriginals and ethnic identities</p></li>
<li><p><strong>Passages</strong>: In partnership with Employment ministry</p></li>
</ul></section><section id="select-other-models-in-modgenopenm" class="slide level2"><h2>Select Other Models in ModGen/OpenM++</h2>
<ul>
<li><p><strong>microWELT</strong>: Multi-country for aging and disability projections</p></li>
<li><p><strong>DYNAMIS-POP (for World Bank)</strong>: Multi-country for populations, education and health</p></li>
<li><p><strong>MicroDEMS</strong>: For Austria on immigration, education, labour force etc.</p></li>
<li><p><strong>DypEX</strong>: Spanish pensions</p></li>
<li><p><strong>MicroCC</strong>: US Community Colleges</p></li>
<li><p><strong>RiskPaths</strong>: Simple teaching model focusing on fertility and nuptiality in Russia and Bulgaria</p></li>
</ul></section></section><section><section id="features-of-openm" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>Features of OpenM++</h1>

</section><section id="what-is-openm" class="slide level2"><h2>What is OpenM++</h2>
<blockquote>
<p>OpenM++ is an open-source platform to develop, use, and deploy micro-simulation or agent-based models. <strong>OpenM++ was designed to enable non-programmers to develop a range of models spanning simple to highly complex.</strong></p>
</blockquote>
<ul>
<li><p>Primarily written in C and C++</p></li>
<li><p>Can install and run on Mac, Windows, and Linux</p></li>
<li><p>Carefully designed and constructed to be the backward compatible <em>heir</em> to <strong>ModGen</strong></p></li>
</ul></section><section id="what-is-openm-1" class="slide level2"><h2>What is OpenM++</h2>
<ul>
<li>
<p><strong>Important point of distinction</strong>:</p>
<ul>
<li>OpenM++ the software/compiler</li>
<li>OpenM++ the microsimulation models written therein</li>
</ul>
</li>
<li><p>We focus on the latter, microsim models written in OpenM++</p></li>
<li>
<p>OpenM++ is a <strong>domain-specific language</strong> (DSL) that extends C++</p>
<ul>
<li>Provides extensions that enable simple to complex microsimulation models to be written with about <em>one-fifth</em> as many lines of code…</li>
</ul>
</li>
</ul></section><section id="why-openm-general-features" class="slide level2"><h2>Why OpenM++: General features</h2>
<ul>
<li><p><strong>Open source</strong>: OpenM++ and all components are licensed under the very broad MIT license</p></li>
<li><p><strong>Cross-platform</strong>: Model development and use on Windows, Linux, or MacOS</p></li>
<li><p><strong>Standards-based</strong>: Uses industry standard formats and technologies</p></li>
<li><p><strong>Zero-footprint</strong>: File-based installation requires no elevation of privileges</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-model-developer-features" class="slide level2"><h2>Why OpenM++: Model developer features</h2>
<ul>
<li><p><strong>High-level language</strong>: Model types, parameters, entities, events, tables, etc. are specified using a compact domain-specific language targeted to microsimulation</p></li>
<li><p><strong>Scalable complexity</strong>: From simple ‘toy’ models to highly complex models</p></li>
<li><p><strong>Modularity</strong>: New events and processes can be added to a model in a new module, often with little or no modification to existing modules.</p></li>
<li><p>Continuous or discrete time, or a mixture.</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-model-developer-features-1" class="slide level2"><h2>Why OpenM++: Model developer features</h2>
<ul>
<li><p><strong>Supports multiple versions</strong>: Multiple OpenM++ versions can be installed and a single environment variable used to choose among them</p></li>
<li><p><strong>Result compare</strong>: Supports rapid comparison of all model outputs during incremental model development</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-computational-features" class="slide level2"><h2>Why OpenM++: Computational features</h2>
<ul>
<li><p><strong>Scalable computation</strong>: Designed to scale linearly with population size or replicates when possible, N log N scaling for typical interacting populations</p></li>
<li><p><strong>Grid-enabled, cloud-enabled</strong>: Supports MPI for multi-processing to distribute execution of replicates to a small or large computational grid or to the cloud, with automatic result assembly</p></li>
<li><p><strong>Multi-threaded</strong>: Supports multi-threading for parallel execution of replicates on desktop or server</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-computational-features-1" class="slide level2"><h2>Why OpenM++: Computational features</h2>
<ul>
<li><p><strong>On-the-fly tabulation</strong>: Tables are computed during the simulation, eliminating the need to output voluminous microdata for subsequent tabulation</p></li>
<li><p><strong>Computationally efficient</strong>: The model specification is transformed to C++ which is processed by an optimizing C++ compiler to produce a highly efficient executable program</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-usability-features" class="slide level2"><h2>Why OpenM++: Usability features</h2>
<ul>
<li><p><strong>Generated UI</strong>: A model-specific UI is generated from the model specification</p></li>
<li><p><strong>Browser-based UI</strong>: The UI requires only a browser, and runs on almost any modern browser</p></li>
<li><p><strong>Cloud-enabled</strong>: Models can be deployed to a cloud and accessed remotely over the web, from a browser</p></li>
<li><p><strong>Multilingual support</strong>: For UI and for model, with real-time language switching</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-analyst-features" class="slide level2"><h2>Why OpenM++: Analyst features</h2>
<ul>
<li><p><strong>Continuous time tabulation</strong>: Powerful but easy to use language constructs to tabulate time-in-state, empirical hazards, transitions counts, state changes, etc.</p></li>
<li><p><strong>Replicate support</strong>: All tables can have underlying replicate simulations to assess the uncertainty of any cell of any output table. Statistical measures of uncertainty are computed for all cells of all tables</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="why-openm-analyst-features-1" class="slide level2"><h2>Why OpenM++: Analyst features</h2>
<ul>
<li><p><strong>Import/export</strong>: Models and runs can be moved between databases, or to standard formats for upstream preparation of inputs or for downstream analysis of outputs</p></li>
<li><p><strong>Dynamic run control</strong>: A computational grid can process runs dynamically to enable whole-model estimation or calibration, with a controlling script reading run results and preparing new runs for execution</p></li>
<li><p><strong>Automation</strong>: Models can be controlled by scripts, <em>e.g.</em>, Python or R</p></li>
</ul>
<div class="footer">
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html" class="uri">https://openmpp.org/wiki/openmpp-wiki.html</a></p>
</div>
</section><section id="openm-workshop-focus" class="slide level2"><h2>OpenM++: Workshop focus</h2>
<ul>
<li>This workshop will primarily focus on the “analysts” perspective for what the benefits are of using OpenM++</li>
</ul>
<blockquote>
<p>Automation: Models can be controlled by scripts, e.g., Python or R.</p>
</blockquote>
<ul>
<li><p>How can we do this?</p></li>
<li><p>Why would we do this?</p></li>
<li><p>What are the benefits?</p></li>
</ul></section><section id="the-setup" class="slide level2"><h2>The Setup</h2>
<ul>
<li>You developed a microsimulation model in OpenM++. You can control the simulation using several (or many many) parameters and run the simulation to get output tables.
<ul>
<li>I come from the oncology world, so my models are cancer-focused, but yours might be finance, pensions, taxes, etc.</li>
</ul>
</li>
<li>You are like me, in that you <strong>DO NOT</strong> like using graphical user interfaces (GUI) to configure and run models, because:
<ul>
<li>Lacks transparency</li>
<li>Lacks reproducibility</li>
<li>Does not scale well</li>
</ul>
</li>
</ul></section><section id="openm-api" class="slide level2"><h2>OpenM++ API</h2>
<blockquote>
<p>The [OpenM++] model API provides programmatic access to scenario management, model inputs, model runs, and model outputs. It is implemented by the OpenM++ oms web service, which uses standard JSON to communicate with a controlling application.</p>
</blockquote>
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg><a href="https://openmpp.org/wiki/openmpp-wiki.html#Oms-web-service-API">API Documentation</a></p>
<ul>
<li>The OpenM++ API has over 100 <em>endpoints</em> for querying, setting, and deleting data</li>
</ul></section></section><section><section id="brief-introduction-to-apis" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>Brief introduction to APIs</h1>

</section><section id="but-what-is-an-api" class="slide level2"><h2>But, what is an API?</h2>
<ul>
<li>
<p>Stands for <em>“Application Programming Interface”</em></p>
<ul>
<li>Is that helpful?</li>
</ul>
</li>
<li><p>In simple terms, it is a software for allowing two applications (client and server) to <em>“communicate”</em> with each other</p></li>
<li><p>The communication occurs using a well-defined and structured language (<em>i.e.</em>, send requests, receive responses)</p></li>
<li><p>Most modern APIs conform to so-called “<strong>REST</strong>” standards (<em>i.e.</em>, a RESTful API)</p></li>
</ul></section><section id="api-schematic" class="slide level2"><h2>API Schematic</h2>

<img data-src="assets/diagram-what-is-an-api-postman-illustration.svg" class="r-stretch quarto-figure-center"><div class="footer">
<p><a href="https://www.postman.com/what-is-an-api/" class="uri">https://www.postman.com/what-is-an-api/</a></p>
</div>
</section><section id="what-is-a-restful-api" class="slide level2"><h2>What is a RESTful API?</h2>
<ul>
<li><p>A versatile interface for sending and retrieving data through HTTP requests in JSON or other formats (e.g., XML, CSV, plain-text)</p></li>
<li><p>REST (Representational State Transfer) APIs represent an example of these interfaces since they use the principles underpinning the REST architectural design when communicating between clients and servers.</p></li>
<li><p>This design includes predefined sets of different operations parameters available via standard HTTP methods such as GET, POST, PUT or DELETE while allowing scalability.</p></li>
</ul></section><section id="restful-api-request-methods" class="slide level2"><h2>RESTful API request methods</h2>
<ul>
<li><p>There are five popular kinds of API request methods: GET, POST, PUT, PATCH, and DELETE</p></li>
<li><p><strong>GET:</strong> retrieves information or data from a specified resource</p></li>
<li><p><strong>POST:</strong> submits data to be processed to a specified resource</p></li>
<li><p><strong>PUT:</strong> updates a specified resource with new data</p></li>
<li><p><strong>DELETE:</strong> deletes a specified resource</p></li>
<li><p><strong>PATCH:</strong> partially updates a specified resource</p></li>
</ul></section></section><section><section id="communicating-with-apis-from-r" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>Communicating with APIs from R</h1>

</section><section id="building-an-api-request-in-r" class="slide level2"><h2>Building an API request in R</h2>
<p>We will utilize the <code>httr2</code> package…</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://httr2.r-lib.org">httr2</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">resp</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/request.html">request</a></span><span class="op">(</span><span class="st">'url goes here...'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/req_method.html">req_method</a></span><span class="op">(</span><span class="st">'GET'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/req_perform.html">req_perform</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_status.html">resp_status</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_status.html">resp_status_desc</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_body_raw.html">resp_body_json</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Request methods are prefixed with <code>req_*</code></p></li>
<li><p>Response methods are prefixed with <code>resp_*</code></p></li>
</ul>
<div class="footer">
<p><a href="https://httr2.r-lib.org" class="uri">https://httr2.r-lib.org</a></p>
</div>
</section><section id="simple-r-api-motivational-quotes" class="slide level2"><h2>Simple R API: Motivational Quotes</h2>
<p>Let’s do a simple example in R using the <a href="https://httr2.r-lib.org">httr2</a> package…</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://httr2.r-lib.org">httr2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/request.html">request</a></span><span class="op">(</span><span class="st">"https://zenquotes.io/api/quotes"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/req_method.html">req_method</a></span><span class="op">(</span><span class="st">'GET'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://httr2.r-lib.org/reference/req_perform.html">req_perform</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_status.html">resp_status</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_status.html">resp_status_desc</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "OK"</code></pre>
</div>
</div>
</section><section id="simple-r-api-motivational-quotes-1" class="slide level2"><h2>Simple R API: Motivational Quotes</h2>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>&lt;httr2_response&gt;</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>GET https://zenquotes.io/api/quotes</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Status: 200 OK</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Content-Type: application/json</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Body: In memory (13118 bytes)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">quotes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr2.r-lib.org/reference/resp_body_raw.html">resp_body_json</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">quotes</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">q</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Good, better, best. Never let it rest. 'Til your good is better and your better is best. "</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">quotes</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">q</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There is no path to Love. Love is the path."</code></pre>
</div>
</div>
</section><section id="simple-r-api-motivational-quotes-2" class="slide level2"><h2>Simple R API: Motivational Quotes</h2>
<p>But even the previous example is a bit verbose for repeated use. Let’s wrap this API request into a modular function.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">get_quote</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">resp</span> <span class="op">&lt;-</span> </span>
<span>    <span class="fu"><a href="https://httr2.r-lib.org/reference/request.html">request</a></span><span class="op">(</span><span class="st">"https://zenquotes.io/api/quotes"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://httr2.r-lib.org/reference/req_method.html">req_method</a></span><span class="op">(</span><span class="st">'GET'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://httr2.r-lib.org/reference/req_perform.html">req_perform</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://httr2.r-lib.org/reference/resp_body_raw.html">resp_body_json</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">resp</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">q</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">get_quote</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "You cannot always control what goes on outside. But you can always control what goes on inside. "</code></pre>
</div>
</div>
</section></section><section><section id="basic-idea-obfuscate-the-technical-debt-for-making-api-requests-in-r-into-modular-user-friendly-functions" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>
<strong>Basic idea</strong>: obfuscate the technical debt for making API requests in R into modular user-friendly functions</h1>
<ul>
<li>Note: In the previous toy example, our API request:
<ul>
<li>Didn’t send any data with the request</li>
<li>Didn’t require user authentication</li>
</ul>
</li>
</ul></section><section id="a-rich-history-of-wrapping-apis" class="slide level2"><h2>A rich history of wrapping APIs…</h2>

<img data-src="assets/imports.png" class="r-stretch"></section><section id="quick-recap" class="slide level2"><h2>Quick Recap</h2>
<ul>
<li><p>We have briefly learned what APIs are and how we communicate with them</p></li>
<li><p>We have learned how to wrap simple API requests into reusable R functions</p></li>
<li><p>Next, we will step up in complexity to learn some more advanced techniques for wrapping APIs (e.g., OpenM++) that allows for more sophisticated conversations between the client and server</p></li>
</ul></section></section><section><section id="r-tricks-of-the-trade" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>
<svg aria-hidden="true" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R Tricks-of-the-trade</h1>
<p>Not only do we want to communicate with the OpenM++ API, but we want our R session to always be up-to-date with the API database in <strong>real time</strong></p>
</section><section id="object-oriented-oo-approach" class="slide level2"><h2>Object-oriented (OO) approach</h2>
<ul>
<li>
<p>Traditionally, R uses the <code>S3</code> object-oriented system which is <strong>functional</strong> by design</p>
<ul>
<li><p>Objects have classes and functions act on classes</p></li>
<li><p>Generics and methods</p></li>
</ul>
</li>
<li>
<p>Other languages (<em>e.g.</em>, Python) use a more traditional (encapsulated) OO system</p>
<ul>
<li>Objects ARE instances of a class definition and methods/attributes BELONG to classes</li>
</ul>
</li>
</ul></section><section id="s3-oos" class="slide level2"><h2>S3 OOS</h2>
<ul>
<li><p>Generics are “general-purpose” functions that perform an action depending on what class of object it is presented with</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html">print()</a></code></p></li>
<li><p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code></p></li>
<li><p>There are many others</p></li>
</ul>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">print</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>function (x, ...) 
UseMethod("print")
&lt;bytecode: 0x132b33678&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
</div>
</section><section id="s3-oos-1" class="slide level2"><h2>S3 OOS</h2>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mpg cyl disp hp drat wt qsec vs am gear carb
 [ reached 'max' / getOption("max.print") -- omitted 32 rows ]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span>, <span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ hp, data = mtcars)

Coefficients:
(Intercept)           hp  
   30.09886     -0.06823  </code></pre>
</div>
</div>
</section><section id="when-to-use-s3-basically-always" class="slide level2"><h2>When to use S3? Basically always…</h2>
<blockquote>
<p>S3 is R’s first and simplest OO system. S3 is informal and <em>ad hoc</em>, but there is a certain elegance in its minimalism: you can’t take away any part of it and still have a useful OO system. <strong>For these reasons, you should use it, unless you have a compelling reason to do otherwise.</strong></p>
</blockquote>
<ul>
<li>I think communicating with an API connected to a database is a compelling reason</li>
</ul>
<div class="footer">
<p><a href="https://adv-r.hadley.nz/s3.html#introduction-12" class="uri">https://adv-r.hadley.nz/s3.html#introduction-12</a></p>
</div>
</section><section id="r6-versus-s3" class="slide level2"><h2>R6 versus S3</h2>
<p>From Advanced R (2e) by Hadley Wickham:</p>
<ul>
<li><p>R6 is a profoundly different OO system from S3 and S4 because it is built on encapsulated objects, rather than generic functions. Additionally R6 objects have reference semantics, which means that they can be modified in place.</p></li>
<li><p>A generic is a regular function so it lives in the global namespace. An R6 method belongs to an object so it lives in a local namespace. This influences how we think about naming.</p></li>
<li><p>R6’s reference semantics allow methods to simultaneously return a value and modify an object. This solves a painful problem called “threading state”.</p></li>
</ul>
<div class="footer">
<p><a href="https://adv-r.hadley.nz/oo-tradeoffs.html#s3-r6" class="uri">https://adv-r.hadley.nz/oo-tradeoffs.html#s3-r6</a></p>
</div>
</section><section id="r6-encapsulated-oos" class="slide level2"><h2>R6 Encapsulated OOS</h2>
<blockquote>
<p>R6 is an implemention of encapsulated object-oriented programming for R, and is a simpler, faster, lighter-weight alternative to R’s built-in reference classes. This style of programming is also sometimes referred to as classical object-oriented programming.</p>
</blockquote>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Standard use of S3 system</span></span>
<span><span class="fu">action</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Compared to…</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">## Standard use of R6 system</span></span>
<span><span class="va">object</span><span class="op">$</span><span class="fu">action</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">object</span><span class="op">$</span><span class="va">field</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="footer">
<p><a href="https://r6.r-lib.org/index.html" class="uri">https://r6.r-lib.org/index.html</a></p>
</div>
</section><section id="dog-example-s3-approach" class="slide level2"><h2>Dog example: S3 Approach</h2>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bucky</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">'Bucky'</span>,</span>
<span>    noise <span class="op">=</span> <span class="st">'bark'</span>,</span>
<span>    species <span class="op">=</span> <span class="st">'dog'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  class <span class="op">=</span> <span class="st">'Dog'</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># New S3 method for `print()`</span></span>
<span><span class="va">print.Dog</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">noise</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">bucky</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bark</code></pre>
</div>
</div>
</section><section id="dog-example-r6-approach" class="slide level2"><h2>Dog example: R6 approach</h2>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r6.r-lib.org">R6</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create an abstract Dog class</span></span>
<span><span class="va">Dog</span> <span class="op">&lt;-</span></span>
<span>  <span class="kw"><a href="https://r6.r-lib.org/reference/R6Class.html">R6Class</a></span><span class="op">(</span></span>
<span>    classname <span class="op">=</span> <span class="st">'Dog'</span>,</span>
<span>    public <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>      name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      species <span class="op">=</span> <span class="st">'dog'</span>,</span>
<span>      initialize <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">self</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="va">name</span></span>
<span>      <span class="op">}</span>,</span>
<span>      make_noise <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'bark'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="dog-example-r6-approach-1" class="slide level2"><h2>Dog example: R6 approach</h2>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bucky</span> <span class="op">&lt;-</span> <span class="va">Dog</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">'Bucky'</span><span class="op">)</span></span>
<span><span class="va">bucky</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bucky</span><span class="op">$</span><span class="va">species</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dog"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bucky</span><span class="op">$</span><span class="fu">make_noise</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bark</code></pre>
</div>
</div>
<ul>
<li>With R6 OOS, attributes and methods BELONG to an object</li>
</ul></section><section id="active-bindings" class="slide level2"><h2>Active Bindings</h2>
<p>From <code><a href="https://rdrr.io/r/base/bindenv.html">?makeActiveBinding</a></code></p>
<blockquote>
<p><code><a href="https://rdrr.io/r/base/bindenv.html">makeActiveBinding()</a></code> installs <code>fun</code> in environment <code>env</code> so that getting the value of <code>sym</code> calls <code>fun</code> with no arguments, and assigning to <code>sym</code> calls <code>fun</code> with one argument, the value to be assigned. This allows the implementation of things like <code>C</code> variables linked to <code>R</code> variables and variables linked to databases</p>
</blockquote>
</section><section id="active-bindings-1" class="slide level2"><h2>Active Bindings</h2>
<ul>
<li><p>That isn’t a very clear definition, so let me try…</p></li>
<li>
<p>Active bindings <strong>LOOK</strong> like standard R objects in your global/local environment, but:</p>
<ul>
<li>When you <strong>ACCESS</strong> the objects value it actually runs a function in the background</li>
<li>When you <strong>ASSIGN</strong> to the object it runs a function with the assigned value passed as its only argument (<em>optionally</em>)</li>
</ul>
</li>
<li><p><strong>NOTE:</strong> Active bindings should be used sparingly, if at all. They are hard to reason about using standard R logic and should be avoided unless absolutely necessary</p></li>
</ul></section><section id="active-bindings-2" class="slide level2"><h2>Active Bindings</h2>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html">missing</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'This runs'</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Or this runs...'</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/bindenv.html">makeActiveBinding</a></span><span class="op">(</span><span class="st">'example_binding'</span>, <span class="va">f</span>, <span class="va">.GlobalEnv</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">example_binding</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This runs</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">example_binding</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Or this runs...</code></pre>
</div>
</div>
<ul>
<li>Active bindings are a first-class feature in R6, so we typically don’t use <code>makeActiveBinding</code> directly…</li>
</ul></section><section id="how-does-this-help-us" class="slide level2"><h2>How does this help us?</h2>
<ul>
<li><p>This feature is useful because our models/data live in a database so active bindings allows us to create objects that always run functions in the background to communicate and stay <em>up-to-date</em> with the server (i.e., OpenM++)</p></li>
<li><p>If a user makes a change in the GUI, this needs to be reflected in REAL TIME in our active R session</p></li>
<li><p>Example: when a user tries to access a model/scenario/run, a function is ran to retrieve these in real-time to ensure they’re accurate and up-to-date</p></li>
</ul>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Real-time communication with API behind-the-scenes</span></span>
<span><span class="va">model_run</span><span class="op">$</span><span class="va">important_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section><section><section id="example-oncosimx-r-package" class="title-slide slide level1 center"><h1>Example: <code>oncosimx</code> R package</h1>
<p>Programmatic interface to OpenM++ and OncoSimX</p>
</section><section id="main-classes" class="slide level2"><h2>Main Classes</h2>
<ul>
<li><p>When using <code>oncosimx</code>, you will interact with one (or many) of three specific classes</p></li>
<li>
<p><code>OpenMppModel</code></p>
<ul>
<li>R6 class definition for an OpenM++ model</li>
</ul>
</li>
<li>
<p><code>OpenMppWorkset</code></p>
<ul>
<li>R6 class definition for a set of model input model parameters</li>
</ul>
</li>
<li>
<p><code>OpenMppModelRun</code></p>
<ul>
<li>R6 class definition for a model run</li>
</ul>
</li>
</ul></section><section id="additional-functions" class="slide level2"><h2>Additional Functions</h2>
<ul>
<li><p><code>get_models()</code>, <code>get_worksets()</code>, <code>get_model_runs()</code></p></li>
<li><p><code>create_scenario()</code> / <code>create_workset()</code></p></li>
<li><p><code>load_model()</code>, <code>load_workset()</code> / <code>load_scenario()</code>, <code>load_model_run()</code> / <code>load_run()</code></p></li>
<li><p><code>delete_scenario()</code> / <code>delete_workset()</code>, <code>delete_run()</code></p></li>
</ul>
<p>Each of these functions is an API request to OpenM++ wrapped into a friendly helper function…</p>
</section><section id="schematic-id" class="slide level2"><h2></h2>

<img data-src="assets/illustrations/illustrations.001.jpeg" class="r-stretch quarto-figure-center"></section><section id="design-considerations" class="slide level2"><h2>Design Considerations</h2>
<ul>
<li><p>This is an <em>opinionated</em> framework for programmatically interfacing with the OpenM++ API and the cloud-based OncoSimX models (or any OpenM++ models)</p></li>
<li><p><strong>Design principle</strong>: abstract away the technical debt associated with calling the OpenM++ API from R; from the users perspective, it should <em>look and feel</em> like a <em>“normal”</em> R package</p></li>
<li><p>Trying to achieve feature parity with the OpenM++ GUI</p></li>
</ul></section><section id="first-hands-on-example-riskpaths" class="slide level2"><h2>First Hands-on Example: RiskPaths</h2>
<blockquote>
<p>Being a model for the study of childlessness, the main event of RiskPaths is the first pregnancy (which is always assumed to lead to birth). Pregnancy can occur at any point in time after the 15th birthday, with risks changing by both age and union status. The underlying statistical models are piecewise constant hazard regressions. With respect to fertility this implies the assumption of a constant pregnancy risk for a given age group and union status.</p>
</blockquote>
<ul>
<li><a href="https://www.statcan.gc.ca/en/microsimulation/modgen/new/chap3/chap3-2#a1">RiskPaths: More Information</a></li>
</ul></section><section id="first-hands-on-example-riskpaths-1" class="slide level2 smaller"><h2>First Hands-on Example: RiskPaths</h2>
<ul>
<li><p>There are 7 configurable parameters (tables)</p></li>
<li>
<p>Mortality</p>
<ul>
<li>
<code>CanDie</code>: Can a person die? (Yes or No)</li>
<li>
<code>ProbMort</code>: Probability of death (by age)</li>
</ul>
</li>
<li>
<p>Fertility</p>
<ul>
<li>
<code>AgeBaselinePreg1</code>: Risk for first pregnancy (by age)</li>
<li>
<code>UnionStatusPreg1</code>: Relative risk of union status on first pregnancy</li>
</ul>
</li>
<li>
<p>Unions</p>
<ul>
<li>
<code>AgeBaselineForm1</code>: Risk for first union formation (by age)</li>
<li>
<code>UnionDurationBaseline</code>: Risk for union dissolution (by time)</li>
<li>
<code>SeparationDurationBaseline</code>: Risk for 2nd union formation</li>
</ul>
</li>
</ul>
<div class="footer">
<p><a href="https://www.statcan.gc.ca/en/microsimulation/modgen/new/chap3/chap3-2" class="uri">https://www.statcan.gc.ca/en/microsimulation/modgen/new/chap3/chap3-2</a></p>
</div>
</section></section><section><section id="hands-on-example" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>
<svg aria-hidden="true" role="img" viewbox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M544 160l-.1 72.6c-.1 52.2-24 101-64 133.1c.1-1.9 .1-3.8 .1-5.7v-8c0-71.8-37-138.6-97.9-176.7l-60.2-37.6c-8.6-5.4-17.9-8.4-27.3-9.4L248.7 48.8c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8l78 135.1c3.3 5.7 10.7 7.7 16.4 4.4s7.7-10.7 4.4-16.4l-62-107.4c-6.6-11.5-2.7-26.2 8.8-32.8S362 5 368.6 16.5l68 117.8 0 0 0 0 43.3 75L480 160c0-17.7 14.4-32 32-32s32 14.4 32 32zM243.9 88.5L268.5 131c-13.9 4.5-26.4 13.7-34.7 27c-.9 1.4-1.7 2.9-2.5 4.4l-28.9-50c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8zm-46.4 63.7l26.8 46.4c.6 6 2.1 11.8 4.3 17.4H224 210.7l0 0H179l-23-39.8c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8zM260.9 175c9.4-15 29.1-19.5 44.1-10.2l60.2 37.6C416.7 234.7 448 291.2 448 352v8c0 83.9-68.1 152-152 152H120c-13.3 0-24-10.7-24-24s10.7-24 24-24h92c6.6 0 12-5.4 12-12s-5.4-12-12-12H88c-13.3 0-24-10.7-24-24s10.7-24 24-24H212c6.6 0 12-5.4 12-12s-5.4-12-12-12H56c-13.3 0-24-10.7-24-24s10.7-24 24-24H212c6.6 0 12-5.4 12-12s-5.4-12-12-12H88c-13.3 0-24-10.7-24-24s10.7-24 24-24H224l0 0 0 0h93.2L271 219.1c-15-9.4-19.5-29.1-10.2-44.1z"></path></svg> Hands-on Example</h1>
<p><strong>RiskPaths</strong>: A model for the study of childlessness</p>
<p><strong>URL:</strong> https://cpac-r.openmpp.org</p>
</section><section id="oncosim" class="slide level2"><h2>OncoSim</h2>
<blockquote>
<p>OncoSim is a free, web-based simulation tool that evaluates cancer control strategies. Combining data from the real world, expert opinion and the published literature, OncoSim projects health and economic outcomes, and attributes them to 19 risk factors, such as smoking and inadequate physical activity. It currently models four cancer sites (breast, colorectal, lung, and cervical) and related screening programs in detail, and provides high-level projections for 25 cancer sites</p>
</blockquote>
</section><section id="second-hands-on-example-oncosim-allcancers" class="slide level2"><h2>Second Hands-on Example: OncoSim-AllCancers</h2>
<blockquote>
<p>The OncoSim-All Cancers Model projects the incidence, deaths and healthcare costs of 25 cancers in Canada and attributes them to various risk factors.</p>
</blockquote>
<h3 id="helpful-links">Helpful Links:</h3>
<ul>
<li><p><a href="https://www.partnershipagainstcancer.ca/tools/oncosim/fact-sheets/">OncoSim fact sheets</a></p></li>
<li><p><a href="https://s22457.pcdn.co/wp-content/uploads/2022/10/OncoSim-All-Cancers-fact-sheet-2022-EN.pdf">OncoSim-All Cancers fact sheet</a></p></li>
<li><p><a href="https://www.partnershipagainstcancer.ca/tools/oncosim/related-resources/#allcancers">OncoSim examples</a></p></li>
</ul></section></section><section><section id="hands-on-example-1" class="title-slide slide level1 center" data-background-color="#ffe57b"><h1>
<svg aria-hidden="true" role="img" viewbox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M544 160l-.1 72.6c-.1 52.2-24 101-64 133.1c.1-1.9 .1-3.8 .1-5.7v-8c0-71.8-37-138.6-97.9-176.7l-60.2-37.6c-8.6-5.4-17.9-8.4-27.3-9.4L248.7 48.8c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8l78 135.1c3.3 5.7 10.7 7.7 16.4 4.4s7.7-10.7 4.4-16.4l-62-107.4c-6.6-11.5-2.7-26.2 8.8-32.8S362 5 368.6 16.5l68 117.8 0 0 0 0 43.3 75L480 160c0-17.7 14.4-32 32-32s32 14.4 32 32zM243.9 88.5L268.5 131c-13.9 4.5-26.4 13.7-34.7 27c-.9 1.4-1.7 2.9-2.5 4.4l-28.9-50c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8zm-46.4 63.7l26.8 46.4c.6 6 2.1 11.8 4.3 17.4H224 210.7l0 0H179l-23-39.8c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8zM260.9 175c9.4-15 29.1-19.5 44.1-10.2l60.2 37.6C416.7 234.7 448 291.2 448 352v8c0 83.9-68.1 152-152 152H120c-13.3 0-24-10.7-24-24s10.7-24 24-24h92c6.6 0 12-5.4 12-12s-5.4-12-12-12H88c-13.3 0-24-10.7-24-24s10.7-24 24-24H212c6.6 0 12-5.4 12-12s-5.4-12-12-12H56c-13.3 0-24-10.7-24-24s10.7-24 24-24H212c6.6 0 12-5.4 12-12s-5.4-12-12-12H88c-13.3 0-24-10.7-24-24s10.7-24 24-24H224l0 0 0 0h93.2L271 219.1c-15-9.4-19.5-29.1-10.2-44.1z"></path></svg> Hands-on Example</h1>
<p><strong>OncoSim-All Cancers</strong>: Projects the incidence, deaths, and healthcare costs of 25 cancers in Canada</p>
<p><strong>URL:</strong> https://cpac-r.openmpp.org</p>
</section><section id="closing-remarks" class="slide level2"><h2>Closing remarks</h2>
<ul>
<li>We learned (hopefully):
<ul>
<li>OpenM++ microsimulation platform</li>
<li>Brief introduction to APIs</li>
<li>Communication with OpenM++ API from R</li>
<li>Some advanced R techniques for real-time API connections</li>
</ul>
</li>
<li>The goal of this workshop was to be <em>illustrative</em>, not <strong>prescriptive</strong>. If you choose to use OpenM++ for your miscrosimulation needs, hopefully this workshop provided <em>food for thought</em> about how best to interact with OpenM++ programmatically using R</li>
</ul></section><section id="helpful-resources" class="slide level2"><h2>Helpful Resources</h2>
<ul>
<li><p><a href="https://httr2.r-lib.org/articles/wrapping-apis.html">Wrapping APIs with httr2</a></p></li>
<li><p><a href="https://ropensci.org/blog/2022/06/16/publicize-api-client-yes-no/">Why You Should (or Shouldn’t) Build an API Client</a></p></li>
<li><p><a href="https://r6.r-lib.org/articles/Introduction.html">Introduction to R6</a></p></li>
<li><p><a href="https://openmpp.org/wiki/openmpp-wiki.html">OpenM++ Wiki</a></p></li>
<li><p><a href="https://github.com/oncology-outcomes/oncosimx">oncosimx GitHub</a></p></li>
</ul>
<p>Please feel free to get in touch with me after the workshop at the following email address: <a href="mailto:matthew.warkentin@ucalgary.ca" class="email">matthew.warkentin@ucalgary.ca</a></p>
</section><section id="acknowledgements" class="slide level2"><h2>
<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"></path></svg> Acknowledgements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>
<strong>OpenM++</strong>
<ul>
<li>Steve Gribble</li>
<li>Anatoly Cherkassky</li>
</ul>
</li>
<li>
<strong>Statistics Canada</strong>
<ul>
<li>Michael C. Wolfson</li>
<li>Rochelle Garner</li>
</ul>
</li>
<li>
<strong>CPAC</strong>
<ul>
<li>Jean Yong</li>
<li>Roxanne Garaszczuk</li>
</ul>
</li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li>
<strong>Brenner Lab/U of C</strong>
<ul>
<li>Darren R. Brenner</li>
<li>Winson Cheung</li>
<li>John Hutchinson</li>
<li>Yibing Ruan</li>
<li>Rob Basmadjian</li>
<li>Mariet Stephen</li>
<li>Keaton Banik</li>
</ul>
</li>
</ul>
</div>
</div>

<img src="assets/UC-vert-rgb.png" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section></section>
</div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="index_files/libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script><script src="index_files/libs/revealjs/plugin/notes/notes.js"></script><script src="index_files/libs/revealjs/plugin/search/search.js"></script><script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script><script src="index_files/libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>